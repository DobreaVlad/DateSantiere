@{
    ViewData["Title"] = "Nota pentru Santier";
    var santier = ViewBag.Santier as DateSantiere.Models.Santier;
}

<style>
#content
{
	background: #fff !important;
}
#content .inner
{
	width: 100%;
	max-width: 600px !important;
	margin: auto;
	padding: 15px;
}
.note-container
{
	max-width: 600px;
	margin: 50px auto;
	padding: 30px;
	background: #fff;
	box-shadow: 0 2px 10px rgba(0,0,0,0.1);
	border-radius: 8px;
}
.note-container .heading h5
{
	margin: 0 0 20px 0;
	padding-bottom: 15px;
	border-bottom: 2px solid #fece46;
	color: #454545;
	font-size: 1.5rem;
}
.santier-info
{
	background: #fece46 !important;
	margin-bottom: 20px;
	padding: 15px;
	border-radius: 5px;
}
.form-group
{
	margin-bottom: 20px;
}
.form-group label
{
	font-weight: 600;
	color: #454545;
	margin-bottom: 8px;
	display: block;
}
.form-group textarea
{
	width: 100% !important;
	max-width: 700px;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 5px;
	resize: vertical;
	font-family: inherit;
}
.form-group input[type="datetime-local"]
{
	width: 100%;
	max-width: 300px;
	padding: 10px;
	border: 1px solid #ddd;
	border-radius: 5px;
	font-size: 14px;
}
#Salveaza
{
	border: 0 !important;
	border-radius: 5px !important;
	height: 45px !important;
	background: #fece46 !important;
	padding: 0 30px !important;
	color: #454545 !important;
	text-shadow: none !important;
	font-family: 'Montserrat', sans-serif;
	font-weight: 600;
	transition: all 0.2s ease-out;
	cursor: pointer;
}
#Salveaza:hover
{
	background: #454545 !important;
	color: #fece46 !important;
}
a.back
{
	display: inline-block;
	height: 45px !important;
	line-height: 45px !important;
	padding: 0 30px;
	text-align: center;
	background: #454545 !important;
	color: #fece46 !important;
	font-weight: 600;
	text-decoration: none;
	border-radius: 5px;
	transition: all 0.2s ease-out;
	margin-left: 10px;
}
a.back:hover
{
	background: #fece46 !important;
	color: #454545 !important;
	text-decoration: none;
}
.text-danger
{
	color: #dc3545;
	font-size: 0.875rem;
	margin-top: 5px;
	display: block;
}
</style>

<div class="note-container">
	<form action="/Santier/CreateNota" method="post">
		@Html.AntiForgeryToken()
		<input type="hidden" name="santierId" value="@santier?.Id" />
		
		<div class="heading">
			<h5>Nota pentru Santier</h5>
		</div>
		
		<div class="santier-info">
			<b>Id: </b>@santier?.Id<br />
			<b>Denumire: </b>@santier?.Name
		</div>
		
		<div class="form-group">
			<label for="Nota">Nota *</label>
			<textarea id="Nota" name="Nota" required rows="5" placeholder="Adaugă nota ta aici..."></textarea>
			<span class="field-validation-valid" data-valmsg-for="Nota" data-valmsg-replace="true"></span>
		</div>
		
		<div class="form-group">
			<label for="Alarma">Data și ora alarmă *</label>
			<input type="datetime-local" id="Alarma" name="Alarma" required />
			<div style="margin-top: 8px; font-style: italic; color: #666; font-size: 0.9rem;">
				Adaugă o dată și o oră la care vrei să primești memo pentru șantierul acesta!
			</div>
			@if (ViewBag.Error != null)
			{
				<span class="text-danger">@ViewBag.Error</span>
			}
		</div>
		
		<div class="form-group">
			<button type="submit" id="Salveaza">
				<i class="bi bi-check-circle"></i> Salvează
			</button>
			<a class="back" href="/Santiere/Details/@santier?.Id">
				<i class="bi bi-arrow-left"></i> Înapoi la șantier
			</a>
		</div>
	</form>
</div>

<script>
// Set minimum date to now
document.addEventListener('DOMContentLoaded', function() {
	var alarmaInput = document.getElementById('Alarma');
	var now = new Date();
	now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
	alarmaInput.min = now.toISOString().slice(0, 16);
});
</script>
